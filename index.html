<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Лавка подарков</title>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            padding: 15px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: clamp(1.5em, 5vw, 2.5em);
        }
        
        /* Навигация по категориям */
        .categories {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .category-btn {
            padding: 8px 16px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border: 2px solid #b8c6db;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            color: #333;
            transition: all 0.3s ease;
            font-size: 14px;
            flex: 1;
            min-width: 120px;
            max-width: 160px;
            text-align: center;
        }
        
        .category-btn:hover, .category-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* Подкатегории для сезонных */
        .subcategories {
            display: none;
            flex-wrap: wrap;
            justify-content: center;
            gap: 6px;
            margin-bottom: 15px;
        }

        .subcategories.active {
            display: flex;
        }

        .subcategory-btn {
            padding: 6px 12px;
            background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
            border: 1px solid #adb5bd;
            border-radius: 15px;
            cursor: pointer;
            font-size: 12px;
            color: #495057;
            transition: all 0.3s ease;
            position: relative;
        }

        .subcategory-btn:hover, .subcategory-btn.active {
            background: linear-gradient(135deg, #5a67d8 0%, #4c51bf 100%);
            color: white;
        }

        .subcategory-btn.unavailable {
            opacity: 0.7;
            background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
            color: #6c757d;
            border: 1px dashed #adb5bd;
        }
        
        /* Витрина подарков */
        .gift-showcase {
            display: none;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-bottom: 30px;
            justify-content: center;
        }

        .gift-showcase.active {
            display: grid;
        }

        /* КОЛЛЕКЦИОННЫЕ - 5 в ряд всегда с фиксированными размерами */
        #collectible.gift-showcase {
            display: none;
            grid-template-columns: repeat(5, 100px);
            gap: 10px;
            justify-content: center;
            width: 100%;
        }

        #collectible.gift-showcase.active {
            display: grid;
        }

        /* Фиксированные размеры для всех подарков */
        .gift-item {
            position: relative;
            width: 100px;
            height: 100px;
            cursor: pointer;
            overflow: hidden;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            flex-shrink: 0;
        }

        .gift-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            padding: 5px;
        }

        /* Стеклянные эффекты */
        .glass-effect {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            transition: all 0.4s ease;
            box-shadow: 
                inset 0 0 30px rgba(255,255,255,0.6),
                inset 0 0 20px rgba(255,255,255,0.4);
            border: 2px solid rgba(255,255,255,0.6);
        }

        .bronze .glass-effect {
            background: 
                linear-gradient(
                    125deg,
                    rgba(205, 127, 50, 0.35) 0%,
                    rgba(205, 127, 50, 0.12) 50%,
                    rgba(205, 127, 50, 0.35) 100%
                ),
                radial-gradient(
                    circle at 30% 30%,
                    rgba(205, 127, 50, 0.5) 0%,
                    rgba(205, 127, 50, 0) 60%
                );
        }

        .silver .glass-effect {
            background: 
                linear-gradient(
                    125deg,
                    rgba(192, 192, 192, 0.4) 0%,
                    rgba(192, 192, 192, 0.15) 50%,
                    rgba(192, 192, 192, 0.4) 100%
                ),
                radial-gradient(
                    circle at 30% 30%,
                    rgba(255, 255, 255, 0.7) 0%,
                    rgba(255, 255, 255, 0) 60%
                );
        }

        .gold .glass-effect {
            background: 
                linear-gradient(
                    125deg,
                    rgba(255, 215, 0, 0.3) 0%,
                    rgba(255, 215, 0, 0.1) 50%,
                    rgba(255, 215, 0, 0.3) 100%
                ),
                radial-gradient(
                    circle at 30% 30%,
                    rgba(255, 215, 0, 0.6) 0%,
                    rgba(255, 215, 0, 0) 60%
                );
        }

        .diamond .glass-effect {
            background: 
                linear-gradient(
                    125deg,
                    rgba(185, 242, 255, 0.4) 0%,
                    rgba(185, 242, 255, 0.15) 50%,
                    rgba(185, 242, 255, 0.4) 100%
                ),
                radial-gradient(
                    circle at 30% 30%,
                    rgba(255, 255, 255, 0.8) 0%,
                    rgba(185, 242, 255, 0) 60%
                );
            box-shadow: 
                inset 0 0 40px rgba(185, 242, 255, 0.7),
                inset 0 0 25px rgba(255, 255, 255, 0.5);
        }
        
        .gift-item:hover .glass-effect {
            opacity: 0;
            transform: scale(1.1);
        }
        
        .gift-item:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        
        /* Форма */
        .form-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border: 2px solid #dee2e6;
        }
        
        .selected-gift-preview {
            text-align: center;
            margin-bottom: 15px;
        }
        
        .preview-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 10px;
            border: 3px solid #dee2e6;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
            font-size: 14px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ced4da;
            border-radius: 5px;
            font-size: 16px;
            box-sizing: border-box;
        }
        
        .code-output {
            background: #2d3748;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .code-content {
            background: #1a202c;
            padding: 15px;
            border-radius: 5px;
            color: #e2e8f0;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            min-height: 100px;
            font-size: 14px;
            overflow-x: auto;
        }
        
        .copy-btn {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            font-weight: bold;
            width: 100%;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: linear-gradient(135deg, #38a169 0%, #2f855a 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .copy-btn:active {
            transform: translateY(0);
        }

        .copy-btn.copied {
            background: linear-gradient(135deg, #3182ce 0%, #2c5aa0 100%);
        }

        /* Подсказка */
        .seasonal-tooltip {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            z-index: 10000;
            border: 3px solid #fff;
            box-shadow: 0 0 30px rgba(0,0,0,0.7);
            display: none;
            max-width: 90%;
            text-align: center;
        }

        .seasonal-tooltip.show {
            display: block;
        }

        /* Адаптивность для коллекционных на мобильных */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .categories {
                gap: 6px;
            }
            
            .category-btn {
                padding: 6px 12px;
                font-size: 12px;
                min-width: 100px;
                max-width: 140px;
            }
            
            /* Коллекционные на мобильных - горизонтальная прокрутка */
            #collectible.gift-showcase {
                display: none;
                grid-template-columns: repeat(5, 80px);
                gap: 8px;
                overflow-x: auto;
                padding: 10px 5px;
                margin: 0 -5px 25px -5px;
                -webkit-overflow-scrolling: touch;
                width: calc(100% + 10px);
                position: relative;
                left: -5px;
            }
            
            #collectible.gift-showcase.active {
                display: grid;
            }
            
            #collectible .gift-item {
                width: 80px;
                height: 80px;
            }
            
            /* Обычные категории */
            .gift-showcase:not(#collectible) {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
                gap: 8px;
            }
            
            .gift-showcase:not(#collectible) .gift-item {
                width: 100%;
                height: auto;
                aspect-ratio: 1/1;
            }
            
            .form-container {
                padding: 15px;
            }
            
            .code-output {
                padding: 12px;
            }
            
            .code-content {
                padding: 12px;
                font-size: 12px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 12px;
                border-radius: 12px;
            }
            
            .categories {
                gap: 4px;
            }
            
            .category-btn {
                padding: 5px 10px;
                font-size: 11px;
                min-width: 90px;
                max-width: 110px;
            }
            
            #collectible.gift-showcase {
                grid-template-columns: repeat(5, 70px);
                gap: 6px;
            }
            
            #collectible .gift-item {
                width: 70px;
                height: 70px;
            }
            
            .gift-showcase:not(#collectible) {
                grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
                gap: 6px;
            }
            
            .form-input {
                padding: 10px;
                font-size: 14px;
            }
            
            .preview-image {
                width: 80px;
                height: 80px;
            }
        }

        @media (max-width: 360px) {
            #collectible.gift-showcase {
                grid-template-columns: repeat(5, 65px);
                gap: 5px;
            }
            
            #collectible .gift-item {
                width: 65px;
                height: 65px;
            }
            
            .gift-showcase:not(#collectible) {
                grid-template-columns: repeat(auto-fill, minmax(65px, 1fr));
                gap: 5px;
            }
        }

        /* Для touch-устройств */
        @media (hover: none) {
            .gift-item:hover {
                transform: none;
            }
            
            .gift-item:active {
                transform: scale(0.95);
            }
            
            .category-btn:hover, .subcategory-btn:hover {
                transform: none;
            }
            
            .category-btn:active, .subcategory-btn:active {
                transform: scale(0.95);
            }
            
            .copy-btn:hover {
                transform: none;
                box-shadow: none;
            }
            
            .copy-btn:active {
                background: linear-gradient(135deg, #2f855a 0%, #276749 100%);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Лавка подарков</h1>
        
        <!-- Навигация по категориям -->
        <div class="categories">
            <button class="category-btn active" onclick="showCategory('flora')">Флора и фауна</button>
            <button class="category-btn" onclick="showCategory('seasonal')">Сезонные</button>
            <button class="category-btn" onclick="showCategory('magic')">Магия</button>
            <button class="category-btn" onclick="showCategory('mischief')">Пакости</button>
            <button class="category-btn" onclick="showCategory('food')">Вкусняшки</button>
            <button class="category-btn" onclick="showCategory('collectible')">Коллекционные</button>
            <button class="category-btn" onclick="showCategory('other')">Разное</button>
        </div>

         <!-- Витрины по категориям -->
        <!-- Флора и фауна - 30 подарков -->
        <div id="flora" class="gift-showcase active">
            <!-- 15 медных -->
            <div class="gift-item bronze" onclick="selectGift(this, 'https://i.pinimg.com/736x/48/32/7b/48327baffcf427874aeeabe915abbf94.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://upforme.ru/uploads/001b/d9/4a/405/513781.png')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/flora_bronze3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/flora_bronze4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/flora_bronze5.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/flora_bronze6.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/flora_bronze7.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/flora_bronze8.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/flora_bronze9.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/flora_bronze10.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/flora_bronze11.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/flora_bronze12.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/flora_bronze13.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/flora_bronze14.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/flora_bronze15.jpg')"><div class="glass-effect"></div></div>
            
            <!-- 10 серебряных -->
            <div class="gift-item silver" onclick="selectGift(this, 'https://i.pinimg.com/736x/48/32/7b/48327baffcf427874aeeabe915abbf94.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/flora_silver2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/flora_silver3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/flora_silver4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/flora_silver5.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/flora_silver6.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/flora_silver7.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/flora_silver8.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/flora_silver9.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/flora_silver10.jpg')"><div class="glass-effect"></div></div>
            
            <!-- 5 золотых -->
            <div class="gift-item gold" onclick="selectGift(this, 'https://i.pinimg.com/736x/48/32/7b/48327baffcf427874aeeabe915abbf94.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/flora_gold2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/flora_gold3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/flora_gold4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/flora_gold5.jpg')"><div class="glass-effect"></div></div>
        </div>
        
       <!-- Сезонные подкатегории -->
        <div id="newyear" class="gift-showcase seasonal-showcase">
            <!-- 6 подарков для нового года -->
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/newyear1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/newyear2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/newyear3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/newyear4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/newyear5.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/newyear6.jpg')"><div class="glass-effect"></div></div>
        </div>

        <div id="birthday" class="gift-showcase seasonal-showcase">
            <!-- 6 подарков для дня рождения -->
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/birthday1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/birthday2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/birthday3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/birthday4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/birthday5.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/birthday6.jpg')"><div class="glass-effect"></div></div>
        </div>

        <div id="valentine" class="gift-showcase seasonal-showcase">
            <!-- 6 подарков для дня влюбленных -->
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/valentine1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/valentine2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/valentine3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/valentine4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/valentine5.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/valentine6.jpg')"><div class="glass-effect"></div></div>
        </div>

        <div id="halloween" class="gift-showcase seasonal-showcase">
            <!-- 6 подарков для хэллоуина -->
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/halloween1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/halloween2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/halloween3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/halloween4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/halloween5.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/halloween6.jpg')"><div class="glass-effect"></div></div>
        </div>

        <div id="easter" class="gift-showcase seasonal-showcase">
            <!-- 6 подарков для пасхи -->
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/easter1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/easter2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/easter3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/easter4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/easter5.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/easter6.jpg')"><div class="glass-effect"></div></div>
        </div>
        
        <!-- Магия - 30 подарков -->
        <div id="magic" class="gift-showcase">
            <!-- 15 медных -->
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/magic_bronze1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/magic_bronze2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/magic_bronze3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/magic_bronze4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/magic_bronze5.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/magic_bronze6.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/magic_bronze7.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/magic_bronze8.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/magic_bronze9.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/magic_bronze10.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/magic_bronze11.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/magic_bronze12.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/magic_bronze13.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/magic_bronze14.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/magic_bronze15.jpg')"><div class="glass-effect"></div></div>
            
            <!-- 10 серебряных -->
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/magic_silver1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/magic_silver2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/magic_silver3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/magic_silver4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/magic_silver5.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/magic_silver6.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/magic_silver7.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/magic_silver8.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/magic_silver9.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/magic_silver10.jpg')"><div class="glass-effect"></div></div>
            
            <!-- 5 золотых -->
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/magic_gold1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/magic_gold2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/magic_gold3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/magic_gold4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/magic_gold5.jpg')"><div class="glass-effect"></div></div>
        </div>
        
        <!-- Пакости - 30 подарков -->
        <div id="mischief" class="gift-showcase">
            <!-- 15 медных -->
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/mischief_bronze1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/mischief_bronze2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/mischief_bronze3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/mischief_bronze4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/mischief_bronze5.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/mischief_bronze6.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/mischief_bronze7.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/mischief_bronze8.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/mischief_bronze9.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/mischief_bronze10.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/mischief_bronze11.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/mischief_bronze12.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/mischief_bronze13.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/mischief_bronze14.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/mischief_bronze15.jpg')"><div class="glass-effect"></div></div>
            
            <!-- 10 серебряных -->
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/mischief_silver1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/mischief_silver2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/mischief_silver3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/mischief_silver4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/mischief_silver5.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/mischief_silver6.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/mischief_silver7.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/mischief_silver8.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/mischief_silver9.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/mischief_silver10.jpg')"><div class="glass-effect"></div></div>
            
            <!-- 5 золотых -->
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/mischief_gold1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/mischief_gold2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/mischief_gold3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/mischief_gold4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/mischief_gold5.jpg')"><div class="glass-effect"></div></div>
        </div>
        
        <!-- Вкусняшки - 30 подарков -->
        <div id="food" class="gift-showcase">
            <!-- 15 медных -->
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/food_bronze1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/food_bronze2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/food_bronze3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/food_bronze4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/food_bronze5.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/food_bronze6.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/food_bronze7.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/food_bronze8.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/food_bronze9.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/food_bronze10.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/food_bronze11.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/food_bronze12.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/food_bronze13.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/food_bronze14.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/food_bronze15.jpg')"><div class="glass-effect"></div></div>
            
            <!-- 10 серебряных -->
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/food_silver1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/food_silver2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/food_silver3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/food_silver4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/food_silver5.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/food_silver6.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/food_silver7.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/food_silver8.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/food_silver9.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/food_silver10.jpg')"><div class="glass-effect"></div></div>
            
            <!-- 5 золотых -->
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/food_gold1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/food_gold2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/food_gold3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/food_gold4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/food_gold5.jpg')"><div class="glass-effect"></div></div>
        </div>

        <!-- КОЛЛЕКЦИОННЫЕ - 5 строк по 5 подарков -->
        <div id="collectible" class="gift-showcase">
            <!-- Строка 1 -->
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл1')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл2')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл3')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл4')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл5')"><div class="glass-effect"></div></div>
            
            <!-- Строка 2 -->
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл6')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл7')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл8')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл9')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл10')"><div class="glass-effect"></div></div>
            
            <!-- Строка 3 -->
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл11')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл12')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл13')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл14')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл15')"><div class="glass-effect"></div></div>
            
            <!-- Строка 4 -->
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл16')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл17')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл18')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл19')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл20')"><div class="glass-effect"></div></div>
            
            <!-- Строка 5 -->
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл21')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл22')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл23')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл24')"><div class="glass-effect"></div></div>
            <div class="gift-item diamond" onclick="selectGift(this, 'https://via.placeholder.com/100x100/B9F2FF/000000?text=Колл25')"><div class="glass-effect"></div></div>
        </div>
        
         <!-- Разное - 30 подарков -->
        <div id="other" class="gift-showcase">
            <!-- 15 медных -->
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/other_bronze1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/other_bronze2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/other_bronze3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/other_bronze4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/other_bronze5.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/other_bronze6.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/other_bronze7.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/other_bronze8.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/other_bronze9.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/other_bronze10.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/other_bronze11.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/other_bronze12.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/other_bronze13.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/other_bronze14.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item bronze" onclick="selectGift(this, 'https://example.com/other_bronze15.jpg')"><div class="glass-effect"></div></div>
            
            <!-- 10 серебряных -->
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/other_silver1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/other_silver2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/other_silver3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/other_silver4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/other_silver5.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/other_silver6.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/other_silver7.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/other_silver8.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/other_silver9.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item silver" onclick="selectGift(this, 'https://example.com/other_silver10.jpg')"><div class="glass-effect"></div></div>
            
            <!-- 5 золотых -->
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/other_gold1.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/other_gold2.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/other_gold3.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/other_gold4.jpg')"><div class="glass-effect"></div></div>
            <div class="gift-item gold" onclick="selectGift(this, 'https://example.com/other_gold5.jpg')"><div class="glass-effect"></div></div>
        </div>

        <!-- Форма для заявки -->
        <div class="form-container">
            <div class="selected-gift-preview">
                <img id="selectedGiftImage" class="preview-image" style="display: none;">
            </div>
            
            <div class="form-group">
                <label class="form-label">Кому отправляем подарок:</label>
                <input type="text" class="form-input" id="recipient" placeholder="Ссылка на профиль или тему...">
            </div>
            
            <div class="form-group">
                <label class="form-label">Текст для получателя:</label>
                <input type="text" class="form-input" id="message" placeholder="Ваше пожелание...">
            </div>
            
            <div class="code-output">
                <div class="code-content" id="generatedCode">
                    Выберите подарок из витрины
                </div>
                <button class="copy-btn" onclick="copyCode()">Скопировать код</button>
            </div>
        </div>
    </div>

    <div id="seasonalTooltip" class="seasonal-tooltip"></div>

    <script>
        let selectedGiftUrl = '';
        
        function showSeasonalTooltip(text) {
            let tooltip = document.getElementById('seasonalTooltip');
            if (tooltip) {
                tooltip.textContent = text;
                tooltip.classList.add('show');
                
                setTimeout(hideSeasonalTooltip, 3000);
            }
        }

        function hideSeasonalTooltip() {
            const tooltip = document.getElementById('seasonalTooltip');
            if (tooltip) {
                tooltip.classList.remove('show');
            }
        }
        
        function showCategory(categoryId) {
            // Скрываем ВСЕ витрины
            document.querySelectorAll('.gift-showcase').forEach(showcase => {
                showcase.classList.remove('active');
            });
            
            // Показываем только выбранную категорию
            const selectedCategory = document.getElementById(categoryId);
            if (selectedCategory) {
                selectedCategory.classList.add('active');
            }
            
            // Обновляем активную кнопку
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Находим нажатую кнопку
            const clickedButton = event?.target || document.querySelector(`[onclick="showCategory('${categoryId}')"]`);
            if (clickedButton) {
                clickedButton.classList.add('active');
            }

            // Показываем/скрываем подкатегории для сезонных
            const subcategories = document.getElementById('seasonalSubcategories');
            if (categoryId === 'seasonal') {
                subcategories.classList.add('active');
                checkSeasonalAvailability();
                showFirstAvailableSubcategory();
            } else {
                subcategories.classList.remove('active');
                // Скрываем все сезонные витрины при переключении на другую категорию
                document.querySelectorAll('.seasonal-showcase').forEach(showcase => {
                    showcase.classList.remove('active');
                });
            }
        }

        function checkSeasonalAvailability() {
            const today = new Date();
            const month = today.getMonth() + 1;
            const day = today.getDate();
            
            const seasonalDates = {
                'newyear': {available: (month === 12 && day >= 15) || (month === 1 && day <= 10), text: 'Доступно: 15 декабря - 10 января'},
                'valentine': {available: month === 2 && day >= 7 && day <= 17, text: 'Доступно: 7-17 февраля'},
                'easter': {available: month === 4, text: 'Доступно: 1-30 апреля'},
                'halloween': {available: month === 10 && day >= 25, text: 'Доступно: 25-31 октября'},
                'birthday': {available: true, text: 'Всегда доступно'}
            };
            
            document.querySelectorAll('.subcategory-btn').forEach(btn => {
                const onclick = btn.getAttribute('onclick');
                if (onclick) {
                    const match = onclick.match(/showSubcategory\('(\w+)'\)/);
                    if (match && match[1]) {
                        const category = match[1];
                        const categoryInfo = seasonalDates[category];
                        
                        if (categoryInfo) {
                            if (!categoryInfo.available) {
                                btn.classList.add('unavailable');
                                btn.onmouseenter = () => showSeasonalTooltip(categoryInfo.text);
                                btn.onmouseleave = hideSeasonalTooltip;
                                btn.ontouchstart = function(e) {
                                    e.preventDefault();
                                    showSeasonalTooltip(categoryInfo.text);
                                };
                            } else {
                                btn.classList.remove('unavailable');
                                btn.onmouseenter = null;
                                btn.onmouseleave = null;
                                btn.ontouchstart = null;
                            }
                        }
                    }
                }
            });
        }

        function showFirstAvailableSubcategory() {
            const today = new Date();
            const month = today.getMonth() + 1;
            const day = today.getDate();
            
            const availableCategories = [
                {id: 'birthday', always: true},
                {id: 'newyear', condition: (month === 12 && day >= 15) || (month === 1 && day <= 10)},
                {id: 'valentine', condition: month === 2 && day >= 7 && day <= 17},
                {id: 'easter', condition: month === 4},
                {id: 'halloween', condition: month === 10 && day >= 25}
            ];
            
            for (let cat of availableCategories) {
                if (cat.always || cat.condition) {
                    const button = document.querySelector(`.subcategory-btn[onclick="showSubcategory('${cat.id}')"]`);
                    if (button && !button.classList.contains('unavailable')) {
                        showSubcategory(cat.id);
                        break;
                    }
                }
            }
        }

        function showSubcategory(subcategoryId) {
            const today = new Date();
            const month = today.getMonth() + 1;
            const day = today.getDate();
            
            const seasonalDates = {
                'newyear': (month === 12 && day >= 15) || (month === 1 && day <= 10),
                'valentine': month === 2 && day >= 7 && day <= 17,
                'easter': month === 4,
                'halloween': month === 10 && day >= 25,
                'birthday': true
            };
            
            if (!seasonalDates[subcategoryId]) {
                showSeasonalTooltip('Эта категория временно недоступна. Проверьте даты доступности.');
                return;
            }
            
            document.querySelectorAll('.seasonal-showcase').forEach(showcase => {
                showcase.classList.remove('active');
            });
            
            const selectedSubcategory = document.getElementById(subcategoryId);
            if (selectedSubcategory) {
                selectedSubcategory.classList.add('active');
            }
            
            document.querySelectorAll('.subcategory-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const activeButton = document.querySelector(`.subcategory-btn[onclick="showSubcategory('${subcategoryId}')"]`);
            if (activeButton) {
                activeButton.classList.add('active');
            }
        }
        
        function selectGift(element, imageUrl) {
            selectedGiftUrl = imageUrl;
            
            const preview = document.getElementById('selectedGiftImage');
            preview.src = imageUrl;
            preview.style.display = 'block';
            
            updateCode();
        }
        
        function updateCode() {
            const recipient = document.getElementById('recipient').value;
            const message = document.getElementById('message').value;
            const codeElement = document.getElementById('generatedCode');
            
            if (!selectedGiftUrl) {
                codeElement.textContent = 'Выберите подарок из витрины';
                return;
            }
            
            let code = `[code]\n`;
            code += `[img]${selectedGiftUrl}[/img]\n\n`;
            code += `Для: ${recipient || '[введите ссылку на получателя]'}\n`;
            code += `Текст: ${message || '[введите ваше пожелание]'}\n\n`;
            code += `[/code]`;
            
            codeElement.textContent = code;
        }
        
        function copyCode() {
            const codeElement = document.getElementById('generatedCode');
            const codeText = codeElement.textContent;
            
            if (!codeText || codeText === 'Выберите подарок из витрины') {
                alert('Сначала выберите подарок из витрины!');
                return;
            }
            
            navigator.clipboard.writeText(codeText).then(() => {
                const btn = document.querySelector('.copy-btn');
                const originalText = btn.textContent;
                btn.textContent = '✓ Скопировано!';
                btn.classList.add('copied');
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.classList.remove('copied');
                }, 2000);
            }).catch(err => {
                fallbackCopyTextToClipboard(codeText);
            });
        }

        function fallbackCopyTextToClipboard(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    const btn = document.querySelector('.copy-btn');
                    const originalText = btn.textContent;
                    btn.textContent = '✓ Скопировано!';
                    btn.classList.add('copied');
                    
                    setTimeout(() => {
                        btn.textContent = originalText;
                        btn.classList.remove('copied');
                    }, 2000);
                } else {
                    alert('Не удалось скопировать код. Скопируйте текст вручную.');
                }
            } catch (err) {
                alert('Не удалось скопировать код. Скопируйте текст вручную.');
            }
            
            document.body.removeChild(textArea);
        }
        
        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            // Добавляем обработчики событий
            document.getElementById('recipient').addEventListener('input', updateCode);
            document.getElementById('message').addEventListener('input', updateCode);
            
            // Добавляем изображения к подаркам
            addImagesToGifts();
            checkSeasonalAvailability();
        });

        function addImagesToGifts() {
            document.querySelectorAll('.gift-item').forEach(item => {
                if (item.querySelector('img')) return;
                
                const onclick = item.getAttribute('onclick');
                if (onclick && onclick.includes("selectGift")) {
                    const match = onclick.match(/selectGift\(this,\s*'([^']+)'\)/);
                    if (match && match[1]) {
                        const imageUrl = match[1];
                        
                        const img = document.createElement('img');
                        img.src = imageUrl;
                        img.className = 'gift-image';
                        img.alt = 'Подарок';
                        img.loading = 'lazy';
                        
                        img.onerror = function() {
                            this.style.display = 'none';
                            const placeholder = document.createElement('div');
                            placeholder.textContent = 'Нет картинки';
                            placeholder.style.cssText = 'display: flex; align-items: center; justify-content: center; height: 100%; color: #6c757d; font-size: 10px;';
                            item.appendChild(placeholder);
                        };
                        
                        item.insertBefore(img, item.firstChild);
                    }
                }
            });
        }

        window.addEventListener('orientationchange', function() {
            setTimeout(addImagesToGifts, 100);
        });
    </script>
</body>
</html>
